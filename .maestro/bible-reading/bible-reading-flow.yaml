---
appId: org.versemate.app
name: Bible Reading Critical Path
description: Tests the core user flow for reading Bible chapters
tags:
  - critical
  - bible
  - reading

---

# Bible Reading Critical Path E2E Test
#
# This flow tests the primary use case: User opens app and reads Genesis 1 in Bible view
#
# User Journey:
# 1. Launch app (redirects to Genesis 1 in Bible view)
# 2. Verify Genesis 1 chapter loads
# 3. Verify Bible verses are visible (no tabs in Bible view)
# 4. Verify view switcher icons work

- launchApp:
    clearState: true
    appId: org.versemate.app

# For development builds: tap on localhost to connect to dev server if shown
- tapOn:
    text: "http://localhost:8081"
    optional: true

# Dismiss developer menu if shown
- tapOn:
    text: "Continue"
    optional: true

# Dismiss dev tools panel by tapping outside or X button
- tapOn:
    point: "50%,15%"
    optional: true

# Handle onboarding screen if shown
- tapOn:
    text: "Skip"
    optional: true

- waitForAnimationToEnd


# Wait for app to fully load (either Bible chapter or Topic screen)
- extendedWaitUntil:
    visible:
      id: "chapter-selector-button"
    timeout: 30000

# Now verify we're on a chapter screen
- assertVisible:
    id: "chapter-selector-button"

# Wait for content to load
- waitForAnimationToEnd


# Verify Bible view icon is present (testID)
- assertVisible:
    id: "bible-view-toggle"

# Verify Explanations view icon is present
- assertVisible:
    id: "commentary-view-toggle"

# First, ensure we're in Bible view by tapping the Bible view icon
- tapOn:
    id: "bible-view-toggle"

- waitForAnimationToEnd


# Tabs should NOT be visible in Bible view (key differentiator)
- assertNotVisible:
    id: "chapter-content-tabs"

# Switch to Explanations view
- tapOn:
    id: "commentary-view-toggle"

# Tabs should now be visible in Explanations view
- assertVisible:
    id: "tab-summary"

# Verify chapter selector button still visible after view switch
- assertVisible:
    id: "chapter-selector-button"
