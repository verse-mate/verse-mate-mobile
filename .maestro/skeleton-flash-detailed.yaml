---
appId: com.versemate.mobile
name: Skeleton Flash Detailed Test
description: Captures multiple screenshots during swipe to detect brief skeleton flash
tags:
  - skeleton
  - visual
  - debug

---

# Skeleton Flash Detailed Test
#
# This test captures screenshots at multiple points during the swipe transition
# to detect brief skeleton flashes that might occur between animations.

- launchApp:
    appId: com.versemate.mobile
    clearState: true

# Wait for Genesis 1 to load
- assertVisible: "Genesis 1"

# Switch to Explanations view
- tapOn:
    id: "explanations-view-icon"

- waitForAnimationToEnd

# Verify we're in Explanations view
- assertVisible:
    id: "chapter-content-tabs"

# Wait to ensure data is cached
- waitForAnimationToEnd

# Take screenshot before swipe
- takeScreenshot: "01-before-swipe"

# Swipe to Genesis 2
- swipe:
    direction: LEFT
    duration: 500

# Take screenshot immediately after swipe starts (during animation)
- takeScreenshot: "02-during-swipe"

# Take screenshot after short delay
- extendedWaitUntil:
    visible: "Genesis 2"
    timeout: 5000

- takeScreenshot: "03-after-header-update"

# Wait for full animation to complete
- waitForAnimationToEnd

# Take screenshot after animation completes
- takeScreenshot: "04-after-animation-complete"

# Check if skeleton is visible at any point
# This will fail if skeleton IS visible (which would be a bug)
- runFlow:
    when:
      visible:
        id: "skeleton-loader"
    commands:
      - takeScreenshot: "BUG-skeleton-visible"
      - stopApp

# If we reach here, skeleton wasn't visible (good!)
# Now test consecutive swipes

- takeScreenshot: "05-before-second-swipe"

# Swipe to Genesis 3
- swipe:
    direction: LEFT
    duration: 500

- takeScreenshot: "06-during-second-swipe"

- extendedWaitUntil:
    visible: "Genesis 3"
    timeout: 5000

- takeScreenshot: "07-after-second-header-update"

- waitForAnimationToEnd

- takeScreenshot: "08-second-swipe-complete"

# Check skeleton again
- runFlow:
    when:
      visible:
        id: "skeleton-loader"
    commands:
      - takeScreenshot: "BUG-skeleton-visible-second-swipe"
      - stopApp
