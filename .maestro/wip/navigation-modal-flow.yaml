---
appId: org.versemate.mobile
name: Navigation Modal Flow
description: Tests book and chapter selection through navigation modal
tags:
  - critical
  - navigation
  - modal

---

# Navigation Modal E2E Test
#
# This flow tests the navigation modal functionality:
# - Open navigation modal
# - Switch between Old/New Testament
# - Select book from list
# - Select chapter from grid
# - Navigate to selected chapter
#
# User Journey:
# 1. Launch app to Genesis 1
# 2. Open navigation modal
# 3. Verify Old Testament tab active
# 4. Switch to New Testament
# 5. Select Matthew from book list
# 6. Select chapter 5 from grid
# 7. Verify Matthew 5 loads

- launchApp:
    appId: org.versemate.mobile

# Wait for app to load
- assertVisible: "Genesis 1"

# Open navigation modal
- tapOn:
    id: "navigation-button"

# Verify modal opened
- assertVisible:
    id: "bible-navigation-modal"

# Verify Old Testament tab is active
- assertVisible:
    id: "testament-tab-ot"

# Verify book list shows Old Testament books
- assertVisible:
    text: "Genesis"

- assertVisible:
    text: "Exodus"

# Switch to New Testament tab
- tapOn:
    id: "testament-tab-nt"

# Verify New Testament books appear
- assertVisible:
    text: "Matthew"

- assertVisible:
    text: "Mark"

# Select Matthew from book list
- tapOn:
    text: "Matthew"

# Verify chapter grid appears (5 columns)
- assertVisible:
    id: "chapter-grid"

# Verify chapter numbers visible
- assertVisible:
    text: "1"

- assertVisible:
    text: "5"

- assertVisible:
    text: "28"

# Select chapter 5
- tapOn:
    text: "5"

# Modal should close and navigate to Matthew 5
- assertNotVisible:
    id: "bible-navigation-modal"

# Verify Matthew 5 loaded
- assertVisible: "Matthew 5"

# Verify content loaded
- assertVisible:
    text: "The Beatitudes"

# Open modal again to test recent books
- tapOn:
    id: "navigation-button"

# Verify Matthew now appears in recent books with clock icon
- assertVisible:
    id: "recent-book-matthew"

# Verify clock icon indicates recent book
- assertVisible:
    id: "recent-book-icon"

# Test book filter
- tapOn:
    id: "book-filter-input"

# Type "John"
- inputText: "John"

# Verify only books matching "John" appear
- assertVisible:
    text: "John"

- assertNotVisible:
    text: "Matthew"

# Clear filter
- tapOn:
    id: "clear-filter-button"

# Verify all books appear again
- assertVisible:
    text: "Matthew"

# Test swipe to dismiss modal
- swipe:
    direction: DOWN
    duration: 300

# Modal should close
- assertNotVisible:
    id: "bible-navigation-modal"

# Verify still on Matthew 5
- assertVisible: "Matthew 5"
